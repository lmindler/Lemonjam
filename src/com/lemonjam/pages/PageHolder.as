package com.lemonjam.pages{	import com.lemonjam.pages.PageHolderBase;	import com.asual.swfaddress.*;	import com.lemonjam.events.URIEvent;	import flash.events.Event;	import flash.events.ProgressEvent;	import com.lemonjam.events.PageEvent;		public class PageHolder extends PageHolderBase	{		private var _pageNum:Number = 0;				public function PageHolder()		{					}				public function pageChange():void		{			var _uri:String = SWFAddress.getValue();			if(_uri == "" || _uri == "/"){				_home.build();				_pageNum = 0;				_home.addEventListener(ProgressEvent.PROGRESS, _pageLoadProgress, false, 0, true);				_home.addEventListener(Event.COMPLETE, _pageLoadComplete, false, 0, true);				dispatchEvent(new URIEvent(URIEvent.URI_CHANGE, -1, true));				//SWFAddress.setValue("weddings");			}			else	_home.unbuild();			for(var i=0;i<categories.length;i++){				if(_uri.search("/" + categories[i]) > -1 || _uri.search(categories[i]) > -1){					sections[i].build();					_pageNum = i;					sections[i].addEventListener(ProgressEvent.PROGRESS, _pageLoadProgress, false, 0, true);					sections[i].addEventListener(Event.COMPLETE, _pageLoadComplete, false, 0, true);					dispatchEvent(new URIEvent(URIEvent.URI_CHANGE, i, true));				}				else{					sections[i].unbuild();				}			}		}				private function _pageLoadProgress(e:ProgressEvent):void		{			//trace(e.bytesLoaded);			dispatchEvent(new PageEvent(PageEvent.PAGE_LOAD_PROGRESS, e.bytesLoaded, e.bytesTotal, true));		}				private function _pageLoadComplete(e:Event):void		{			trace("complete");			if(_pageNum != 0){				sections[_pageNum].removeEventListener(ProgressEvent.PROGRESS, _pageLoadProgress);				sections[_pageNum].removeEventListener(Event.COMPLETE, _pageLoadComplete);			}			else{				_home.removeEventListener(Event.COMPLETE, _pageLoadComplete);				_home.removeEventListener(ProgressEvent.PROGRESS, _pageLoadProgress);			}						dispatchEvent(new PageEvent(PageEvent.PAGE_LOAD_COMPLETE, 0, 0, true));		}	}}