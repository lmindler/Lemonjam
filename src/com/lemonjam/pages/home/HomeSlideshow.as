package com.lemonjam.pages.home{	import flash.events.ProgressEvent;	import flash.events.Event;		import com.greensock.*;	import com.lemonjam.ui.slide.BackgroundSlide;	import com.lemonjam.ui.slideshow.SlideshowBase;	import com.asual.swfaddress.*;	import flash.utils.Timer;	import flash.events.TimerEvent;		public class HomeSlideshow extends SlideshowBase	{		private var _currentPhotoNum:Number = 0;		private var _timer:Timer = new Timer(5000, 1);		private var _waitToStartTimer:Boolean = false;				public function HomeSlideshow()		{			_timer.addEventListener(TimerEvent.TIMER, _timerTick);		}				public function build():void		{			if(_images[_currentPhotoNum].loaded){				for(var i=0;i<_images.length;i++){					if(_currentPhotoNum == i){						if(i == 0)		_images[i].build(true);						else			_images[i].build();						TweenLite.to(_images[i], .3, {alpha:1});					}					else						_images[i].unbuild();				}				_timer.start();			}						else{				if(_currentPhotoNum == 0)		_images[_currentPhotoNum].build(true);				else							_images[_currentPhotoNum].build();				_waitToStartTimer = true;			}		}				public function unbuild():void		{			_timer.reset();			_timer.stop();		}				private function _timerTick(e:TimerEvent):void		{			_currentPhotoNum++;						if(_currentPhotoNum == _images.length)	_currentPhotoNum = 0;						_timer.reset();			_timer.stop();			build();		}				private function _loadComplete(e:Event):void		{						resize();			if(_waitToStartTimer){				build();				_waitToStartTimer = false;			}		}				public function dataLoaded(value:Array):void		{			data = value;						for(var i=0;i<data.length;i++){				var _img = new BackgroundSlide(data[i].img, data[i].forceHorizontal);				this.addChild(_img);				_images.push(_img);				_img.addEventListener(Event.COMPLETE, _loadComplete);			}		}	}}