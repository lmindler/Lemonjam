package com.lemonjam{	import flash.display.MovieClip;	import flash.events.Event;	import flash.display.StageScaleMode;	import flash.display.StageAlign;		import com.lemonjam.core.DataSorter;		import com.stimuli.loading.*;	import com.lemonjam.ui.PatternOverlay;	import flash.events.ProgressEvent;	import com.lemonjam.core.XMLLoader;	import flash.text.TextField;	import com.lemonjam.events.PageEvent;		public class MainBase extends MovieClip	{		private var _loader:BulkLoader;		private var _data:DataSorter = new DataSorter();				protected var navigation:MovieClip;		protected var pageHolder:MovieClip;		protected var preloader:MovieClip;		private var xmlToLoad:String = "http://lemonjamphoto.com/cms/lemonjam/";		private var _currentLoading:String = "";				public function MainBase()		{			navigation = getChildByName("navigationMC") as MovieClip;			pageHolder = getChildByName("pageHolderMC") as MovieClip;			preloader = getChildByName("preloaderMC") as MovieClip;						//events			stage.scaleMode = StageScaleMode.NO_SCALE;			stage.align = StageAlign.TOP_LEFT;						preloader.resize();			preloader.x = preloader.y = 0;		}				protected function init(e:Event=null):void		{			stage.addEventListener(Event.RESIZE, resize);						var _xml:XMLLoader = new XMLLoader(xmlToLoad);			_xml.addEventListener(Event.COMPLETE, _xmlLoaded);		}				private function _xmlLoaded(e:Event = null):void		{						var _xmlList:XMLList = e.target.xmlData.data;									_data.data = e.target.xmlData;			dispatchEvent(new Event(Event.INIT));			resize();		}				protected function sectionLoadComplete(e:PageEvent):void		{			preloader.unbuild();		}				protected function sectionProgress(e:PageEvent):void		{			preloader.updateProgress(e.bytesLoaded, e.bytesTotal);					}				private function resize(e:Event = null):void		{			navigation.resize();			pageHolder.resize();			preloader.resize();		}				protected function get data():DataSorter		{			return _data;		}	}}